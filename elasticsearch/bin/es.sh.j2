#!/bin/bash
unset JAVA_HOME

function start() {
  echo "start"
  nohup {{ es_home }}/bin/elasticsearch -p {{ es_log_dir }}/elasticsearch.pid -d >/dev/null 2>&1 &
  echo $!
}

function stop() {
  echo "stop"
  kill $(cat {{ es_log_dir }}/elasticsearch.pid && echo)
}

function restart() {
  echo "restart"
  stop
  start
}

case "${@: -1}" in
  start )
    start
    ;;
  stop )
    stop
    ;;
  restart )
    restart
    ;;
  remove )
    remove
    ;;
  * )
    echo "sh es.sh start | stop | restart "
    ;;
esac
